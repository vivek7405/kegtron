{"version":3,"sources":["webpack:///./routes/account/index.js","webpack:///./global-access.js","webpack:///./configuration.js","webpack:///./routes/account/style.css"],"names":["axios","require","default","Account","Component","constructor","props","super","onPasswordInput","ev","this","setState","pass","target","value","onRetypePasswordInput","pass2","onPasswordChange","self","confirm","Promise","resolve","url","Configuration","mdashURL","encodeURIComponent","localStorage","ktok","method","data","password","state","catch","then","setTimeout","GlobalAccess","getDevices","app","componentDidMount","headerName","backlink","render","class","style","account","type","placeholder","onInput","disabled","icon","title","onClick","get","res","devices","pending","Object","keys","pubkeys","map","k","all","getAllServings","servings","baseURL","provisionURL","appID","callTimeoutMilli","defaultSiteName","drinkSizes","drinkSizes_US","kegSizes","kegSizes_US","module","exports"],"mappings":"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","file":"route-account.chunk.dc04b.esm.js","sourcesContent":["import { h, Component } from 'preact';\r\nimport { Router } from 'preact-router';\r\nimport style from './style';\r\nimport Configuration from '../../configuration';\r\nimport SpinButton from '../../components/spin-button';\r\nimport GlobalAccess from '../../global-access';\r\nconst axios = require('axios').default;\r\n\r\nexport default class Account extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            pass: \"\",\r\n            pass2: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.app.setState({\r\n            headerName: \"Account\",\r\n            backlink: \"\"\r\n        });\r\n    }    \r\n\r\n    onPasswordInput = (ev) => {\r\n        this.setState({\r\n            pass: ev.target.value\r\n        });\r\n    }\r\n\r\n    onRetypePasswordInput = (ev) => {\r\n        this.setState({\r\n            pass2: ev.target.value\r\n        });\r\n    }\r\n\r\n    onPasswordChange = () => {\r\n        let self = this;\r\n\r\n        let ok = confirm(\"Sure to update your password?\");\r\n        if (!ok) return Promise.resolve();\r\n\r\n        let url = Configuration.mdashURL + \"/customer?access_token=\" + encodeURIComponent(localStorage.ktok);\r\n        let data = {\r\n            password: self.state.pass\r\n        };\r\n\r\n        return axios({\r\n            method: \"POST\",\r\n            url: url,\r\n            data: data\r\n        })\r\n            .catch(function () { })\r\n            .then(function () {\r\n                setTimeout(GlobalAccess.getDevices(self.props.app), 250);\r\n            });\r\n    }\r\n\r\n    render() {\r\n        let self = this;\r\n\r\n        return (\r\n            <div class={style.account}>\r\n                <div class=\"overflow-auto p-2 font-weight-light\">\r\n                    <div class=\"px-2 my-2\">\r\n                        <b>Change Password</b>\r\n                    </div>\r\n\r\n                    <hr />\r\n                    \r\n                    <form class=\"form px-2\">\r\n                        <div class=\"form-group row my-2\">\r\n                            <label class=\"col-form-label col-4\">Password</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"password\" value={self.state.pass} placeholder=\"Type Password\" class=\"form-control\" onInput={this.onPasswordInput} />\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group row my-2\">\r\n                            <label class=\"col-form-label col-4\">Retype Password</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"password\" value={self.state.pass2} placeholder=\"Type Password\" class=\"form-control\" onInput={this.onRetypePasswordInput} />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <SpinButton class=\"btn-block btn-primary mt-3\"\r\n                        disabled={!self.state.pass || !self.state.pass2 || self.state.pass != self.state.pass2}\r\n                        icon=\"fa-save\"\r\n                        title=\"Change Password\"\r\n                        onClick={self.onPasswordChange}>\r\n                    </SpinButton>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import Configuration from './configuration';\r\nconst axios = require('axios').default;\r\n\r\nexport default class GlobalAccess {\r\n    static getDevices = (app) => {\r\n        axios\r\n            .get(\r\n                Configuration.mdashURL + \"/customer?access_token=\" + localStorage.ktok\r\n            )\r\n            .then(function (res) {\r\n                var devices = {},\r\n                    pubkeys = res.data.pubkeys || {};\r\n                var keys = Object.keys(pubkeys);\r\n                var pending = keys.map(function (k) {\r\n                    var url =\r\n                        Configuration.mdashURL +\r\n                        \"/api/v2/m/device?access_token=\" +\r\n                        encodeURIComponent(k);\r\n                    return axios({\r\n                        method: \"GET\",\r\n                        url: url\r\n                    })\r\n                        .then(function (res) {\r\n                            devices[k] = res.data;\r\n                        })\r\n                        .catch(function () { });\r\n                });\r\n                Promise.all(pending).then(function () {\r\n                    app.setState({\r\n                        devices: devices\r\n                    });\r\n                })\r\n            });\r\n    }\r\n\r\n    static getAllServings = (app) => {\r\n        axios\r\n            .get(\r\n                Configuration.mdashURL + \"/customer?access_token=\" + localStorage.ktok\r\n            )\r\n            .then(function (res) {\r\n                var servings = {}, pubkeys = res.data.pubkeys || {};\r\n\r\n                var keys = Object.keys(pubkeys);\r\n                var pending = keys.map(function (k) {\r\n                    var url = Configuration.mdashURL + \"/api/v2/m/device/data/servings_all?access_token=\" + encodeURIComponent(k);\r\n                    return axios({\r\n                        method: \"GET\",\r\n                        url: url\r\n                    })\r\n                        .then(function (res) {\r\n                            servings[k] = res.data;\r\n                        })\r\n                        .catch(function () { });\r\n                });\r\n                Promise.all(pending).then(function () {\r\n                    app.setState({\r\n                        servings: servings,\r\n                        pubkeys: pubkeys\r\n                    });\r\n                })\r\n            });\r\n    }\r\n}","const Configuration = {\r\n    baseURL: \"http://localhost:8080/\",\r\n    provisionURL: \"http://192.168.4.1\",\r\n    mdashURL: \"https://mdash.net\",\r\n    appID: \"\", // <-- Set this to YOUR_APP_ID\r\n    callTimeoutMilli: 10000, // 10 seconds\r\n    defaultSiteName: \"NewSite\",\r\n    drinkSizes: {\r\n        \"1000\": \"Liter (1000 mL)\",\r\n        \"500\": \"Half Liter (500 mL)\",\r\n        \"651\": \"Bomber (651 mL)\",\r\n        \"568\": \"UK Pint (568 mL)\",\r\n        \"473\": \"US Pint (473 mL)\",\r\n        \"355\": \"US Bottle (355 mL)\",\r\n        \"0\": \"Custom\"\r\n    },\r\n    drinkSizes_US: {\r\n        \"1000\": \"Liter (33.8oz)\",\r\n        \"500\": \"Half Liter (16.9 oz)\",\r\n        \"651\": \"Bomber (22.0 oz)\",\r\n        \"568\": \"UK Pint (19.2 oz)\",\r\n        \"473\": \"US Pint (16 oz)\",\r\n        \"355\": \"US Bottle (12 oz)\",\r\n        \"0\": \"Custom\"\r\n    },\r\n    kegSizes: {\r\n        \"9464\": \"Half Corny (9.5L)\",\r\n        \"18927\": \"Corny (18.9L)\",\r\n        \"19550\": \"1/6 Barrel (19.6L)\",\r\n        \"20000\": \"20L\",\r\n        \"25000\": \"25L\",\r\n        \"29340\": \"1/4 Barrel (29.3L)\",\r\n        \"30000\": \"30L\",\r\n        \"40915\": \"Firkin (40.9L)\",\r\n        \"50000\": \"50L\",\r\n        \"58670\": \"1/2 Barrel (58.7L)\",\r\n        \"0\": \"Custom\"\r\n    },\r\n    kegSizes_US: {\r\n        \"9464\": \"Half Corny (2.5 gal)\",\r\n        \"18927\": \"Corny (5 gal)\",\r\n        \"19550\": \"1/6 Barrel (5.16 gal)\",\r\n        \"20000\": \"20L (5.28 gal)\",\r\n        \"25000\": \"25L (6.6 gal)\",\r\n        \"29340\": \"1/4 Barrel (7.75 gal)\",\r\n        \"30000\": \"30L (7.93 gal)\",\r\n        \"40915\": \"Firkin (10.81 gal)\",\r\n        \"50000\": \"50L (13.21 gal)\",\r\n        \"58670\": \"1/2 Barrel (15.5 gal)\",\r\n        \"0\": \"Custom\"\r\n    }\r\n}\r\n\r\nexport default Configuration;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account\":\"account__6VdwB\"};"],"sourceRoot":""}